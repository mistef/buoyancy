import{measurments as e}from"./threeJS.js";let xSelect=document.getElementById("xSelectList"),ySelect=document.getElementById("ySelectList"),xId=0,yId=7,ctx=document.getElementById("myChart"),record=document.getElementById("record");record.addEventListener("click",function(){table.order([]);let t=addNewRow(e);addData(chart,parseNum(t[xId]),parseNum(t[yId]))});let xyValues=[],chart=new Chart("myChart",{type:"scatter",data:{datasets:[{pointRadius:4,pointBackgroundColor:"rgba(154,210,132,1)",pointBorderColor:"rgba(154,210,132,1)",data:xyValues}]},options:{plugins:{legend:{display:!1},tooltip:{displayColors:!1}},scales:{y:{title:{display:!0,text:"Y-Axis Label",color:"#cccccc"}},x:{title:{display:!0,text:"X-Axis Label",color:"#cccccc"}}}}});function addData(e,t,a){xyValues.push({x:t,y:a}),sessionStorage.setItem("chartData",xyValues),e.update()}chart.options.scales.x.grid.color="#555555",chart.options.scales.y.grid.color="#555555",chart.options.scales.x.ticks.color="#cccccc",chart.options.scales.y.ticks.color="#cccccc",chart.update();let table=new DataTable("#myTable",{info:!1,paging:!1,searching:!1,order:[],language:{decimal:",",thousands:".",emptyTable:"Δεν έχουν καταγραφεί μετρήσεις"},select:!0,stateSave:!0,stateSaveParams:function(e,t){t.search.search=""}});function addNewRow(e){let t=[(e.volume/1e3).toLocaleString(),e.force.toLocaleString(),(e.height/100).toLocaleString(),(Math.round(1e3*e.mass)/1e3).toLocaleString(),e.densityFl.toLocaleString(),(e.volumeObj/1e3).toLocaleString(),e.density.toLocaleString(),(e.volume/1e3).toLocaleString(),e.force.toLocaleString(),(e.height/100).toLocaleString(),(Math.round(1e3*e.mass)/1e3).toLocaleString(),e.densityFl.toLocaleString(),(e.volumeObj/1e3).toLocaleString(),e.density.toLocaleString(),];return table.row.add(t).draw(!0),t}function clearAndUpdateChart(){xyValues.length=0;let e=table.rows().data(),t=xSelect.options[xSelect.selectedIndex].text;chart.options.scales.x.title.text=t;let a=ySelect.options[ySelect.selectedIndex].text;chart.options.scales.y.title.text=a;for(let c=0;c<e.length;c++)addData(chart,parseNum(e[c][xId]),parseNum(e[c][yId]));chart.update()}function parseNum(e){return parseFloat(e.replace(".","").replace(",","."))}function visibleColumns(e,t,a){e.column(t).visible(!0),e.column(a).visible(!0);for(let c=0;c<14;c++)c!=t&&c!=a&&e.column(c).visible(!1)}$("#example").dataTable({stateSave:!0,stateSaveParams:function(e,t){t.search.search=""}}),visibleColumns(table,xId,yId),clearAndUpdateChart(),xSelect.addEventListener("change",function(){switch(this.value){case"volumeL":xId=0;break;case"force":xId=1;break;case"height":xId=2;break;case"mass":xId=3;break;case"densityO":xId=4;break;case"volumeO":xId=5;break;case"densityL":xId=6}visibleColumns(table,xId,yId),clearAndUpdateChart()}),ySelect.addEventListener("change",function(){switch(this.value){case"volumeL":yId=7;break;case"force":yId=8;break;case"height":yId=9;break;case"mass":yId=10;break;case"densityO":yId=11;break;case"volumeO":yId=12;break;case"densityL":yId=13}visibleColumns(table,xId,yId),clearAndUpdateChart()}),$(document).on("keyup",function(e){46===e.keyCode&&table.rows({selected:!0}).any()&&(table.rows(".selected").remove().draw(!1),clearAndUpdateChart())});