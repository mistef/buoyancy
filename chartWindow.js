import{measurments}from"./threeJS.js";const xSelect=document.getElementById("xSelectList"),ySelect=document.getElementById("ySelectList");let xId=0,yId=8;const ctx=document.getElementById("myChart"),record=document.getElementById("record");record.addEventListener("click",(function(){table.order([]);let e=addNewRow(measurments);addData(chart,parseNum(e[xId]),parseNum(e[yId]))}));let xyValues=[];const chart=new Chart("myChart",{type:"scatter",data:{datasets:[{pointRadius:4,pointBackgroundColor:"rgba(154,210,132,1)",pointBorderColor:"rgba(154,210,132,1)",data:xyValues}]},options:{plugins:{legend:{display:!1},tooltip:{displayColors:!1}},scales:{y:{title:{display:!0,text:"Y-Axis Label",color:"#cccccc"}},x:{title:{display:!0,text:"X-Axis Label",color:"#cccccc"}}}}});function addData(e,t,a){let c={x:t,y:a};xyValues.push(c),sessionStorage.setItem("chartData",xyValues),e.update()}chart.options.scales.x.grid.color="#555555",chart.options.scales.y.grid.color="#555555",chart.options.scales.x.ticks.color="#cccccc",chart.options.scales.y.ticks.color="#cccccc",chart.update();let table=new DataTable("#myTable",{info:!1,paging:!1,searching:!1,order:[],language:{decimal:",",thousands:".",emptyTable:"Δεν έχουν καταγραφεί μετρήσεις"},select:!0,stateSave:!0,stateSaveParams:function(e,t){t.search.search=""}});function addNewRow(e){let t=[(e.volume/1e3).toString().replace(".",","),e.force.toString().replace(".",","),(e.height/100).toString().replace(".",","),(Math.round(1e3*e.mass)/1e3).toString().replace(".",","),e.densityFl.toString().replace(".",","),(e.volumeObj/1e3).toString().replace(".",","),e.density.toString().replace(".",","),e.gravity.toString().replace(".",","),(e.volume/1e3).toString().replace(".",","),e.force.toString().replace(".",","),(e.height/100).toString().replace(".",","),(Math.round(1e3*e.mass)/1e3).toString().replace(".",","),e.densityFl.toString().replace(".",","),(e.volumeObj/1e3).toString().replace(".",","),e.density.toString().replace(".",","),e.gravity.toString().replace(".",",")];return table.row.add(t).draw(!0),t}function clearAndUpdateChart(){xyValues.length=0;let e=table.rows().data(),t=xSelect.options[xSelect.selectedIndex].text;chart.options.scales.x.title.text=t;let a=ySelect.options[ySelect.selectedIndex].text;chart.options.scales.y.title.text=a;for(let t=0;t<e.length;t++)addData(chart,parseNum(e[t][xId]),parseNum(e[t][yId]));chart.update()}function parseNum(e){return parseFloat(e.replace(".","").replace(",","."))}function visibleColumns(e,t,a){e.column(t).visible(!0),e.column(a).visible(!0);for(let c=0;c<16;c++)c!=t&&c!=a&&e.column(c).visible(!1)}$("#example").dataTable({stateSave:!0,stateSaveParams:function(e,t){t.search.search=""}}),visibleColumns(table,xId,yId),clearAndUpdateChart(),xSelect.addEventListener("change",(function(){switch(this.value){case"volumeL":xId=0;break;case"force":xId=1;break;case"height":xId=2;break;case"mass":xId=3;break;case"densityO":xId=4;break;case"volumeO":xId=5;break;case"densityL":xId=6;break;case"gravity":xId=7}visibleColumns(table,xId,yId),clearAndUpdateChart()})),ySelect.addEventListener("change",(function(){switch(this.value){case"volumeL":yId=8;break;case"force":yId=9;break;case"height":yId=10;break;case"mass":yId=11;break;case"densityO":yId=12;break;case"volumeO":yId=13;break;case"densityL":yId=14;break;case"gravity":yId=15}visibleColumns(table,xId,yId),clearAndUpdateChart()})),$(document).on("keyup",(function(e){46===e.keyCode&&table.rows({selected:!0}).any()&&(table.rows(".selected").remove().draw(!1),clearAndUpdateChart())}));const deleteSelected=document.getElementById("deleteSelected");deleteSelected.addEventListener("click",(function(){table.rows(".selected").remove().draw(!1),clearAndUpdateChart()}));const deleteEverything=document.getElementById("deleteEverything");deleteEverything.addEventListener("click",(function(){table.rows().remove().draw(!1),clearAndUpdateChart()}));
